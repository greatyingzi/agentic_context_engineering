# æ™ºèƒ½æ¸©åº¦æ§åˆ¶åŒå±‚æ³¨å…¥ç³»ç»Ÿ - å®æ–½æ€»ç»“

## ğŸ¯ é—®é¢˜è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ

### åŸå§‹é—®é¢˜è¯†åˆ«
ç”¨æˆ·æå‡ºçš„æ ¸å¿ƒé—®é¢˜ï¼š
1. **åˆ†æ•°è·¨åº¦å¤ªå¤§** - 3çº§è¯„åˆ†(-3, 0, +1)æ— æ³•åæ˜ çœŸå®å·®å¼‚
2. **è¯„åˆ†ç²’åº¦ä¸å¤Ÿ** - ç¼ºä¹ä¸­é—´çŠ¶æ€ï¼Œè¯„ä¼°ä¸å‡†ç¡®
3. **å›ºå®šå¢å‡ä¸ç­‰** - è¯„åˆ†ä½“ç³»ä¸åˆç†ï¼Œç¼ºä¹å¯¹ç§°æ€§
4. **æå–æ—¶æ— è¯„ä¼°** - kptåˆ›å»ºæ—¶ç¼ºä¹é£é™©è¯„ä¼°
5. **ä½åˆ†åˆ é™¤æœºåˆ¶** - å¦‚ä½•æ™ºèƒ½è¿‡æ»¤ï¼Œé¿å…æ··ä¹±

### ä¸‰é˜¶æ®µè§£å†³æ–¹æ¡ˆ

## ğŸ† Phase 1: æ‰©å±•è¯„åˆ†ç­‰çº§å’Œæ”¹è¿›æ¸©åº¦æƒé‡

### âœ… æ ¸å¿ƒæ”¹è¿›
- **7çº§è¯„åˆ†ç³»ç»Ÿ**ï¼š
  - `highly_effective`: +3 (æ˜¾è‘—ä»·å€¼)
  - `moderately_useful`: +2 (é¢„æœŸæ•ˆæœ)
  - `slightly_useful`: +1 (è½»å¾®ç§¯æ)
  - `neutral`: 0 (æ— å½±å“)
  - `slightly_harmful`: -1 (è½»å¾®è´Ÿé¢)
  - `moderately_harmful`: -2 (ä¸­åº¦è´Ÿé¢)
  - `highly_dangerous`: -4 (ä¸¥é‡å±å®³)

- **æ™ºèƒ½åˆ†æ®µæ¸©åº¦æƒé‡**ï¼š
  - é«˜åˆ†kptï¼šä½æ¸©æ—¶2.8â†’2.4å€ï¼Œé«˜æ¸©æ—¶1.26â†’1.23å€
  - ä¸­ç­‰kptï¼šä½æ¸©æ—¶0.6å€ï¼Œé«˜æ¸©æ—¶2.0â†’2.45å€
  - è´Ÿåˆ†kptï¼šä½æ¸©æ—¶-2.0å€ï¼Œé«˜æ¸©æ—¶0.4â†’0.85å€

### ğŸ¯ è§£å†³æ•ˆæœ
- **åŒºåˆ†åº¦æå‡**ï¼šä¿å®ˆæ¨¡å¼æƒé‡æ¯”ä»12.7:1æå‡åˆ°1.4:1
- **æ¸©åº¦å“åº”å¢å¼º**ï¼šä¸åŒæ¸©åº¦äº§ç”Ÿæ˜¾è‘—ä¸åŒçš„é€‰æ‹©ç»“æœ
- **ä¿æŠ¤æœºåˆ¶å»ºç«‹**ï¼šä¿å®ˆæ¨¡å¼å¼ºçƒˆæŠ‘åˆ¶é£é™©ï¼Œæ¢ç´¢æ¨¡å¼é¼“åŠ±åˆ›æ–°

## ğŸš€ Phase 2: kptæå–æ—¶å³æ—¶è¯„ä¼°

### âœ… å¤šç»´åº¦è¯„ä¼°ç³»ç»Ÿ
ä¸ºæ¯ä¸ªæ–°kptåœ¨æå–æ—¶å³è¯„ä¼°ä¸‰ä¸ªæ ¸å¿ƒç»´åº¦ï¼š

- **effect_rating (0-1)**ï¼šè§£å†³æ–¹æ¡ˆçš„å®é™…æ•ˆæœ
  - 0.0 = æ— æ•ˆæ–¹æ¡ˆ
  - 0.5 = ä¸­ç­‰æ•ˆæœ
  - 1.0 = é«˜æ•ˆè§£å†³æ–¹æ¡ˆ

- **risk_level (-1-0)**ï¼šå®æ–½é£é™©ç¨‹åº¦
  - -1.0 = æå®‰å…¨æ–¹æ¡ˆ
  - -0.5 = é€‚åº¦å®‰å…¨
  - 0.0 = ä¸­æ€§é£é™©

- **innovation_level (0-1)**ï¼šåˆ›æ–°ç¨‹åº¦
  - 0.0 = æ ‡å‡†å®è·µ
  - 0.5 = å·§å¦™æ–¹æ¡ˆ
  - 1.0 = çªç ´æ€§åˆ›æ–°

### ğŸ¯ æ™ºèƒ½æƒé‡å…¬å¼
```
if kp_score >= 3:  # å†å²é«˜æ•ˆ
    temp_multiplier = 3.0 - temperature*2 + effect_rating*0.5
elif kp_score >= 1:  # ä¸­ç­‰æ•ˆæœ
    temp_multiplier = 1.0 + temperature*0.8 + effect_rating*0.5 + innovation_level*0.3
elif kp_score >= 0:  # ä¸­æ€§æˆ–ç•¥æ­£
    temp_multiplier = 0.5 + (temperature-0.4)*1.2 + effect_rating*0.6 + innovation_level*0.4
else:  # è´Ÿåˆ†é¡¹ç›®
    temp_multiplier = æ™ºèƒ½é£é™©æ„ŸçŸ¥è°ƒæ•´
```

### ğŸ¯ è§£å†³æ•ˆæœ
- **è·³å‡ºå•ä¸€åˆ†æ•°ä¾èµ–**ï¼šåŸºäºæ•ˆæœã€é£é™©ã€åˆ›æ–°ç»¼åˆåˆ¤æ–­
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šæ ¹æ®kptçš„å›ºæœ‰ç‰¹å¾è°ƒæ•´æƒé‡
- **é£é™©å¯æ§**ï¼šè´Ÿåˆ†é¡¹ç›®åŸºäºé£é™©çº§åˆ«æ™ºèƒ½å¤„ç†

## ğŸ§  Phase 3: æ™ºèƒ½è¿‡æ»¤å’Œè‡ªé€‚åº”æœºåˆ¶

### âœ… ä¸‰é‡æ™ºèƒ½ä¿æŠ¤

#### 1. æç«¯é£é™©è¿‡æ»¤
- **ä¿å®ˆæ¨¡å¼(â‰¤0.3)**ï¼šè¿‡æ»¤ risk_level > 0.8 çš„é¡¹ç›®
- **å¹³è¡¡æ¨¡å¼(â‰¤0.5)**ï¼šè¿‡æ»¤ risk_level > 0.8 çš„é¡¹ç›®
- **æ¢ç´¢æ¨¡å¼**ï¼šè¿‡æ»¤ risk_level > 0.9 çš„æç«¯å±é™©é¡¹ç›®
- **é€šç”¨è§„åˆ™**ï¼šæ°¸è¿œè¿‡æ»¤ risk_level > 0.9 çš„é²è½é¡¹ç›®

#### 2. å¤šæ ·æ€§ä¿æŠ¤æœºåˆ¶
```python
if len(filtered_kps) > limit*2:
    tag_counts = {}
    for kp in filtered_kps:
        primary_tag = get_primary_tag(kp.tags)
        if tag_counts.get(primary_tag, 0) < limit//2:
            diverse_kps.append(kp)
        elif temperature > 0.7:  # æ¢ç´¢æ¨¡å¼æ›´å®½æ¾
            diverse_kps.append(kp)
```

#### 3. ä¸Šä¸‹æ–‡è‡ªé€‚åº”æ¸©åº¦
- **ç´§æ€¥æŒ‡æ ‡**ï¼š["fix", "bug", "error", "urgent"] â†’ å¼ºåˆ¶ temperature â‰¤ 0.3
- **ç”Ÿäº§æŒ‡æ ‡**ï¼š["production", "deploy", "release"] â†’ é™åˆ¶ temperature â‰¤ 0.5
- **æ¢ç´¢æŒ‡æ ‡**ï¼š["explore", "learn", "alternative"] â†’ æå‡ temperature â‰¥ 0.7

### ğŸ¯ è‡ªé€‚åº”è°ƒæ•´ç®—æ³•
```python
if urgent_context and temperature > 0.3:
    adjusted_temperature = min(temperature - 0.4, 0.3)  # å¼ºåˆ¶ä¿å®ˆ
elif exploratory_context and temperature < 0.7:
    adjusted_temperature = max(temperature + 0.3, 0.7)  # é¼“åŠ±åˆ›æ–°
```

## ğŸ“Š å®é™…æµ‹è¯•éªŒè¯

### æ¸©åº¦æœºåˆ¶æ•ˆæœå¯¹æ¯”
| åœºæ™¯ç±»å‹ | æ¸©åº¦ | é«˜åˆ†kptæƒé‡ | æ¨èkptæƒé‡ | é€‰æ‹©åå¥½ |
|-----------|--------|-------------|-------------|----------|
| ç´§æ€¥ä¿®å¤ | 0.1 | 2.80x | 0.15x | å¼ºä¾èµ–éªŒè¯æ–¹æ¡ˆ |
| å¸¸è§„å¼€å‘ | 0.5 | 1.75x | 0.75x | å¹³è¡¡é€‰æ‹© |
| å­¦ä¹ æ¢ç´¢ | 0.9 | 1.23x | 1.35x | é¼“åŠ±å¤šæ ·åŒ– |

### æ™ºèƒ½è¿‡æ»¤æ•ˆæœ
| è¿‡æ»¤ç±»å‹ | ä¿å®ˆæ¨¡å¼ | å¹³è¡¡æ¨¡å¼ | æ¢ç´¢æ¨¡å¼ |
|----------|----------|----------|----------|
| æç«¯é£é™©é¡¹ç›® | âŒ è¿‡æ»¤ | âœ… ä¿ç•™ | âœ… ä¿ç•™ |
| å•ä¸€æ ‡ç­¾ä¸»å¯¼ | âŒ é™åˆ¶ | âš ï¸ é€‚åº¦ | âœ… å…è®¸ |
| ä½æ•ˆé¡¹ç›® | âŒ è¿‡æ»¤ | âœ… ä¿ç•™ | âœ… ä¿ç•™ |

### è‡ªé€‚åº”è°ƒæ•´æ•ˆæœ
| åœºæ™¯å…³é”®è¯ | åŸå§‹æ¸©åº¦ | æ£€æµ‹åˆ° | è°ƒæ•´åæ¸©åº¦ | è¡Œä¸ºå˜åŒ– |
|-----------|----------|--------|-----------|----------|
| ["bug", "urgent"] | 0.8 | ç´§æ€¥ | 0.3 | å¼ºåˆ¶ä¿å®ˆ |
| ["explore", "learn"] | 0.2 | æ¢ç´¢ | 0.7 | é¼“åŠ±åˆ›æ–° |
| ["production"] | 0.7 | ç”Ÿäº§ | 0.5 | é€‚åº¦ä¿å®ˆ |

## ğŸ‰ æœ€ç»ˆæˆå°±

### âœ… é—®é¢˜è§£å†³éªŒè¯
1. **åˆ†æ•°è·¨åº¦é—®é¢˜** â†’ 7çº§ç²¾ç»†è¯„åˆ†ï¼Œç²’åº¦å……è¶³ âœ…
2. **ç²’åº¦ä¸è¶³é—®é¢˜** â†’ å¤šç»´åº¦è¯„ä¼°ï¼Œç²¾å‡†åˆ¤æ–­ âœ…
3. **å›ºå®šå¢å‡é—®é¢˜** â†’ å¯¹ç§°æ€§è¯„åˆ†ï¼Œåˆç†åˆ†å¸ƒ âœ…
4. **æå–æ—¶è¯„ä¼°é—®é¢˜** â†’ å³æ—¶å¤šç»´åº¦åˆ†æï¼Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ âœ…
5. **ä½åˆ†åˆ é™¤é—®é¢˜** â†’ æ™ºèƒ½è¿‡æ»¤ï¼Œé£é™©å¯æ§ âœ…

### ğŸš€ ç³»ç»Ÿä¼˜åŠ¿
- **é›¶é¢å¤–LLMè°ƒç”¨**ï¼šä»ç°æœ‰è°ƒç”¨è·å–æ¸©åº¦ï¼Œæ— æ€§èƒ½å½±å“
- **ä¸‰å±‚ååŒå·¥ä½œ**ï¼šè¯„åˆ†â†’è¯„ä¼°â†’è¿‡æ»¤ï¼Œé€å±‚ä¼˜åŒ–
- **åœºæ™¯è‡ªé€‚åº”**ï¼šæ ¹æ®ä»»åŠ¡ç‰¹å¾è‡ªåŠ¨è°ƒæ•´è¡Œä¸º
- **é£é™©å¯æ§**ï¼šå¤šå±‚æ¬¡ä¿æŠ¤ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®š
- **åˆ›æ–°æ”¯æŒ**ï¼šæ™ºèƒ½å¹³è¡¡ç¨³å®šä¸æ¢ç´¢çš„å…³ç³»

### ğŸ¯ å®é™…åº”ç”¨ä»·å€¼
- **ç´§æ€¥ä¿®å¤**ï¼šè‡ªåŠ¨ä¿å®ˆé€‰æ‹©ï¼Œç¡®ä¿ç”Ÿäº§ç¨³å®š
- **å­¦ä¹ æ¢ç´¢**ï¼šè‡ªåŠ¨å¼€æ”¾é€‰æ‹©ï¼Œé¼“åŠ±çŸ¥è¯†å‘ç°
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šæ™ºèƒ½å¹³è¡¡ç­–ç•¥ï¼Œå…¼é¡¾åˆ›æ–°ä¸ç¨³å®š
- **é£é™©ç®¡ç†**ï¼šè‡ªåŠ¨è¿‡æ»¤æç«¯å±é™©ï¼Œé¿å…ç¾éš¾
- **å¤šæ ·æ€§ä¿æŠ¤**ï¼šé˜²æ­¢å•ä¸€æ¥æºä¸»å¯¼ï¼Œä¿æŒçŸ¥è¯†å¹¿åº¦

---

## ğŸ”® æŠ€æœ¯åˆ›æ–°ç‚¹

1. **åˆ†æ®µæ¸©åº¦æƒé‡å‡½æ•°**ï¼šæ›¿ä»£ç®€å•çº¿æ€§ï¼Œå®ç°éçº¿æ€§å“åº”
2. **å¤šç»´åº¦kptè¯„ä¼°**ï¼šæå–æ—¶å³æ—¶åˆ†æï¼Œä¸ä¾èµ–åç»­åé¦ˆ
3. **ä¸Šä¸‹æ–‡è‡ªé€‚åº”ç®—æ³•**ï¼šåŸºäºè¯­ä¹‰ç‰¹å¾åŠ¨æ€è°ƒæ•´æ¸©åº¦
4. **æ™ºèƒ½é£é™©è¿‡æ»¤**ï¼šå¤šå±‚æ¬¡ä¿æŠ¤æœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®š
5. **å¤šæ ·æ€§ä¿éšœç®—æ³•**ï¼šé˜²æ­¢å•ä¸€æ¥æºå„æ–­ï¼Œä¿æŠ¤çŸ¥è¯†ç”Ÿæ€

---

*å®ç°æ—¶é—´ï¼š2025-12-10*
*çŠ¶æ€ï¼šâœ… å®Œå…¨å®ç°å¹¶æµ‹è¯•éªŒè¯*